{% extends 'base.html' %}

{% block title %}Profile - Semicolons{% endblock %}

{% block content %}
<div class="container mx-auto px-4 sm:px-6 py-4 sm:py-6">
    <div class="max-w-xs sm:max-w-sm md:max-w-md mx-auto">
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 sm:mb-6 space-y-2 sm:space-y-0">
            <div>
                <h1 class="text-2xl sm:text-3xl font-bold text-text-dark mb-1 sm:mb-2">My Profile</h1>
                <p class="text-sm sm:text-base text-subtext-dark">Update your profile information</p>
            </div>
            <a href="{% url 'dashboard' %}" class="text-primary hover:text-blue-400 inline-flex items-center text-sm sm:text-base">
                <span class="material-icons mr-1 text-lg sm:text-xl">arrow_back</span>
                Back to Dashboard
            </a>
        </div>

        <div class="bg-card-dark rounded-lg shadow-lg border border-gray-700 p-3 sm:p-4">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="flex flex-col sm:flex-row items-center sm:items-start space-y-3 sm:space-y-0 sm:space-x-4 mb-3 sm:mb-4">
                    <div class="relative">
                        <div class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-primary flex items-center justify-center text-white font-bold text-lg sm:text-2xl overflow-hidden cursor-pointer" onclick="document.getElementById('photo-input').click()">
                            {% if user.profile.photo %}
                                <img src="{{ user.profile.photo.url }}" alt="Profile" class="w-16 h-16 sm:w-20 sm:h-20 rounded-full object-cover">
                            {% else %}
                                {{ user.first_name.0|default:user.username.0|upper }}
                            {% endif %}
                        </div>
                        <div class="absolute -bottom-1 -right-1 bg-primary rounded-full p-1 sm:hidden">
                            <span class="material-icons text-white text-sm">camera_alt</span>
                        </div>
                    </div>
                    <div class="text-center sm:text-left">
                        <h3 class="text-base sm:text-lg font-semibold text-text-dark">Profile Photo</h3>
                        <p class="text-xs sm:text-sm text-subtext-dark mb-2">Upload a new profile photo</p>
                        {{ form.photo }}
                    </div>
                </div>

                <div class="mb-3 sm:mb-4">
                    <label class="block text-xs sm:text-sm font-medium text-text-dark mb-2">Full Name</label>
                    <input type="text" value="{{ user.first_name }}" readonly class="w-full px-3 py-2 text-sm sm:text-base border border-gray-600 rounded-lg bg-gray-700 text-subtext-dark cursor-not-allowed">
                </div>

                <div class="mb-3 sm:mb-4">
                    <label class="block text-xs sm:text-sm font-medium text-text-dark mb-2">Email</label>
                    <input type="email" value="{{ user.email }}" readonly class="w-full px-3 py-2 text-sm sm:text-base border border-gray-600 rounded-lg bg-gray-700 text-subtext-dark cursor-not-allowed">
                </div>

                <div class="mb-3 sm:mb-4">
                    <label class="block text-xs sm:text-sm font-medium text-text-dark mb-2">Bio</label>
                    {{ form.bio }}
                </div>

                <div class="flex justify-center sm:justify-end">
                    <button type="submit" class="w-full sm:w-auto bg-primary hover:bg-blue-600 text-white px-4 sm:px-6 py-2 text-sm sm:text-base rounded-lg font-medium">
                        Update Profile
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}